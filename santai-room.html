<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santaiの部屋 | トータルフットケア サンタイ</title>
    <meta name="description" content="オーナーが海外で学んだ足つぼ・アロマ・台湾若石・アーユルヴェーダなど、学びのルーツとサロンに至るまでの道のりをご紹介します。">
    <link rel="icon" href="img/santai_logo2023.png" type="image/png">
    <link rel="canonical" href="https://santai-footcare.com/santai-room.html">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles-santai-room.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div>
                    <a href="index.html" class="logo">
                        <img src="img/santai-banner.png" alt="トータルフットケアサロン santai" class="banner-logo">
                    </a>
                </div>
                <nav>
                    <button class="nav-toggle" aria-label="メニュー">メニュー</button>
                    <ul class="nav-menu">
                        <button class="nav-close" aria-label="閉じる">×</button>
                        <li><a href="index.html#services">サービス内容</a></li>
                        <li><a href="treatment.html">施術</a></li>
                        <li><a href="course.html">講座</a></li>
                        <li><a href="santai-room.html">Santaiの部屋</a></li>
                        <li><a href="index.html#faq">よくある質問</a></li>
                        <li><a href="index.html#about">当店について</a></li>
                        <li><a href="index.html#contact">アクセス</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <section class="hero" style="padding: 60px 0;">
        <div class="container">
            <h1>Santaiの部屋</h1>
            <p>私が海外で学んだメソッドのルーツと、サロンに至るまでの道のりをご紹介します。</p>
        </div>
    </section>

    <!-- 学びのルーツ・地球儀（Globe.gl：時系列の弧＋飛行機アニメ） -->
    <section class="santai-room-globe">
        <div class="container">
            <h2 class="section-title">学びのルーツを地球儀で見る</h2>
            <div class="globe-visual">
                <div class="world-map-card">
                    <div id="globe-container" class="globe-container globe-gl" aria-label="3D地球儀（海外の学びの軌跡）"></div>
                    <p class="world-map-legend">高松（サロン）→ パース → バリ → バンコク → 台湾（足つぼ）→ トルコ（ハマム）→ スリランカ（アーユルヴェーダ）</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 年表：縦軸（年月）＋横（アコーディオン） -->
    <section class="santai-room-timeline-intro">
        <div class="container">
            <h2 class="section-title">学びの年表</h2>
            <p class="timeline-intro-text">様々な経験を経て、足揉み・栄養・心の在り方に辿り着き、現在のサロン運営につながっています。（<a href="https://ameblo.jp/santai777/" target="_blank" rel="noopener">ブログ</a>でも日々発信しています）</p>
            <div class="year-timeline">
                <div class="year-timeline-row" data-has-globe="true">
                    <div class="year-axis"><span class="year-month">2011年頃</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2011">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">開業前 — 自然療法・ボディワークへの興味</span>
                        </div>
                        <div class="year-accordion-body" id="body-2011" hidden>
                            <p>心身の不調をきっかけに、自然療法やボディワークに興味を持ち始めた時期です。同じ生活をしているのに人によって体調が違うことへの疑問や、自分の体を自分で整えたいという思いが、その後の海外での学びやサロン開業の原点になっています。ブログでも「心と体の健康」をテーマに発信している根っこはここにあり、情報に溢れる今だからこそ、自分に合った養生を見つける大切さを、後に講座や施術でお伝えするきっかけにもなりました。</p>
                        </div>
                    </div>
                </div>

                <div class="year-timeline-row" data-has-globe="true">
                    <div class="year-axis"><span class="year-month">2014年頃</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2014">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">パース・バリ・バンコク — アロマ、ジャムウ、タイハーバル</span>
                        </div>
                        <div class="year-accordion-body" id="body-2014" hidden>
                            <div id="globe-timeline-2014" class="globe-container globe-timeline-mini" aria-label="パース・バリ・バンコク"></div>
                            <p>パースでアロマセラピー、バリでジャムウスパ・バネッサスパ、バンコクでタイハーバル（ハーブボール）を学びました。タイではチェンライのハーブを手作業で砕き、一つひとつ包む体験も。ハーブボールは転がして凝りをほぐし、温熱で身体の芯から温める伝統療法で、肩こり・冷え・副交感神経を整える効果があります。ブログでも「ハーブボールってなに？？」としてご紹介している、サロンメニューの土台のひとつです。</p>
                        </div>
                    </div>
                </div>

                <div class="year-timeline-row" data-has-globe="false">
                    <div class="year-axis"><span class="year-month">2015年頃〜2017年</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2015-17">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">足揉み・ヨガ — 足・栄養・心の在り方へ</span>
                        </div>
                        <div class="year-accordion-body" id="body-2015-17" hidden>
                            <p>足揉み・ヨガ・発酵ランチのコラボイベントなど、さまざまな経験を重ねた時期です。足揉みで内臓の働きを整え、ヨガで体をしなやかにし、発酵で腸を整えるという「免疫力アップ」のテーマで、ブログでも「足揉み×ヨガ×発酵ランチ」として発信してきました。そのなかで「足から整える」「栄養から整える」「心の在り方」の三つが現在のサロンの柱に繋がっています。</p>
                        </div>
                    </div>
                </div>

                <div class="year-timeline-row" data-has-globe="true">
                    <div class="year-axis"><span class="year-month">2017年</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2017">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">台湾 — 若石健康法（足つぼ）本場 Wo Shi</span>
                        </div>
                        <div class="year-accordion-body" id="body-2017" hidden>
                            <div id="globe-timeline-taiwan" class="globe-container globe-timeline-mini" aria-label="台湾（若石健康法）"></div>
                            <p>台湾に本拠地を置く世界三大リフレクソロジーのひとつ、若石健康法の本場 Wo Shi で足つぼの技術と理論を学びました。足裏・ふくらはぎの64ヶ所の反射区と足もみの順序を学び、ブログでも「台湾式あしもみ」若石健康法足つぼとしてメインメニューでご紹介している、サロンの核となるメソッドです。この学びが後の認定講師資格や初級プロ養成講座開講のベースになっています。</p>
                            <div class="year-diplomas">
                                <div class="year-diploma">
                                    <img src="img/image026.jpg" alt="プロ若石健康法マスター 認定証" loading="lazy" class="year-diploma-img">
                                    <div class="year-diploma-text">
                                        <strong>プロ若石健康法マスター（RWO-SHR Health Method）</strong> 2017年10月29日、國際若石健康研究會日本分會（RWO-SHR Health Institute International Japan）より、プロ若石健康法マスターの理論・実習研修課程修了の認定証を取得。足裏リフレクソロジーにおける Introductory Lectures のプロ養成コース修了であり、サロンの「台湾式あしもみ」若石健康法足つぼの基盤となる資格です。<a href="https://www.jakuseki.com/" target="_blank" rel="noopener">国際若石メソッドスクール（日本）</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="year-timeline-row" data-has-globe="true">
                    <div class="year-axis"><span class="year-month">2018年頃</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2018">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">バンコク — チネイザン（気のボディワーク）</span>
                        </div>
                        <div class="year-accordion-body" id="body-2018" hidden>
                            <div id="globe-timeline-bangkok" class="globe-container globe-timeline-mini" aria-label="バンコク（チネイザン）"></div>
                            <p>バンコクでチネイザン（気のボディワーク）を学び、からだと「気」のつながりを深めました。ブログでは足つぼ・チネイザン・ハーブサウナ・バリニーズマッサージなどを「こころと内臓のデトックスのできる魂に響くメニュー」としてご案内しており、心と体の健康をテーマにしたサロン運営の軸のひとつになっています。</p>
                        </div>
                    </div>
                </div>

                <div class="year-timeline-row" data-has-globe="false">
                    <div class="year-axis"><span class="year-month">2021年</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2021">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">分子栄養学</span>
                        </div>
                        <div class="year-accordion-body" id="body-2021" hidden>
                            <p>結婚後、同じものを食べているのに夫と体調が違うことから「個体差」に興味を持ち、分子栄養学（分子整合調合医学）を学び始めました。プロテインや玄米が自分には合わず不調になった経験もあり、学ぶことで夕方の倦怠感が改善。足つぼと併用して「足つぼ×分子栄養学で体質を整える」をサロンの柱にしています。ブログの「初めての分子栄養学お話会」や講座で、あなたに合った栄養・食事の見直しをお伝えしています。（資格取得は2024年）</p>
                        </div>
                    </div>
                </div>

                <div class="year-timeline-row" data-has-globe="true">
                    <div class="year-axis"><span class="year-month">2023年</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2023">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">資格取得 — CSソックス中級（6月）・ドライヘッドスパ（10月）・若石認定講師（11月）</span>
                        </div>
                        <div class="year-accordion-body" id="body-2023" hidden>
                            <div id="globe-timeline-2023" class="globe-container globe-timeline-mini" aria-label="若石健康法認定講師"></div>
                            <p>国際若石メソッドスクール認定の若石健康法初級プロ養成講座講師として、認定講師の資格を取得しました。20時間かけて64ヶ所の反射区と足もみの順序を学ぶ講座を開講し、修了後は「若石健康普及指導士」のライセンスが習得できます。ブログの「若石初級プロ養成講座のご案内」や「各種講座について」でご案内している看板講座です。同じ年には、6月にCSソックスアドバイザー中級、10月に臨床ドライヘッドスパ協会のコースを修了。サロン9周年を迎え、健康と幸せに特化した体質改善サロンとしてリニューアルしました。</p>
                            <div class="year-diplomas">
                                <div class="year-diploma">
                                    <img src="img/image022.jpg" alt="CSソックスアドバイザー中級 認定証" loading="lazy" class="year-diploma-img">
                                    <div class="year-diploma-text">
                                        <strong>CSソックスアドバイザー中級</strong> 令和5年6月4日、FC Comfort Support（ファイブコンフォート）よりコンフォートサポートソックスに基づくアドバイザー認定課程（中級）修了。足の専門家が開発した5本指サポートソックスの選定・アドバイスができる資格。足指の矯正やむくみ・冷えのケアに活かしています。<a href="https://5comfort.com/" target="_blank" rel="noopener">ファイブコンフォート</a>
                                    </div>
                                </div>
                                <div class="year-diploma">
                                    <img src="img/image025.jpg" alt="臨床ドライヘッドスパ協会 修了証" loading="lazy" class="year-diploma-img">
                                    <div class="year-diploma-text">
                                        <strong>臨床ドライヘッドスパ協会 N.Kan コース修了</strong> 2023年10月18日、臨床ドライヘッドスパ協会（N.Kan）のコースを修了。当サロンのメニュー「ドライヘッドスパ」は、オイルを使わず頭皮と頭部を心地よい圧で刺激し、自律神経を整え脳疲労をリセットする施術としてご案内しています。
                                    </div>
                                </div>
</div>
                            </div>
                        </div>
                </div>

                <div class="year-timeline-row" data-has-globe="false">
                    <div class="year-axis"><span class="year-month">2024年</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2024">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">分子栄養学アドバイザー 養成講座修了・認定（8月／9月）</span>
                        </div>
                        <div class="year-accordion-body" id="body-2024" hidden>
                            <p>オーソモレキュラーアカデミー主催の「初心者から学べる分子栄養学アドバイザー養成講座」第11期を8月に修了し、9月に一般社団法人分子整合栄養医学普及協会より分子栄養学アドバイザーとして認定されました。2021年から学んできた分子栄養学の集大成となる資格で、ブログや講座で個体差に沿った栄養・食事のアドバイスをお伝えするうえでの裏付けになっています。</p>
                            <div class="year-diplomas">
                                <div class="year-diploma">
                                    <img src="img/image023.jpg" alt="分子栄養学アドバイザー養成講座 修了証書" loading="lazy" class="year-diploma-img">
                                    <div class="year-diploma-text">
                                        <strong>分子栄養学アドバイザー養成講座 修了証書</strong> 令和6年8月31日、オーソモレキュラーアカデミー主催・第11期修了。一般社団法人分子整合栄養医学普及協会発行。<a href="https://www.orthomolecular-academy.jp/" target="_blank" rel="noopener">オーソモレキュラーアカデミー</a>
                                    </div>
                                </div>
                                <div class="year-diploma">
                                    <img src="img/image024.jpg" alt="分子栄養学アドバイザー 認定証書" loading="lazy" class="year-diploma-img">
                                    <div class="year-diploma-text">
                                        <strong>分子栄養学アドバイザー 認定証書</strong> 令和6年9月1日、一般社団法人分子整合栄養医学普及協会より分子栄養学アドバイザーとして認定。足つぼと併用した体質改善の柱としてサロンで活かしています。<a href="https://www.orthomolecular-academy.jp/" target="_blank" rel="noopener">オーソモレキュラーアカデミー</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="year-timeline-row" data-has-globe="true">
                    <div class="year-axis"><span class="year-month">2025年5月</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2025-05">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">トルコ・カッパドキア🇹🇷 — 極上ハマム体験</span>
                        </div>
                        <div class="year-accordion-body" id="body-2025-05" hidden>
                            <div id="globe-timeline-cappadocia" class="globe-container globe-timeline-mini" aria-label="トルコ・カッパドキア"></div>
                            <p>カッパドキア・ユルギャップの歴史あるハマムスパを体験しました。この体験から得た学びは、本場のハマムが"ただのサウナ"ではなく、<strong>温める→角質除去（ケセ）→ボディマスク→泡・ボディマッサージ→フェイスパック</strong>という一連の流れで、全身の美容と浄化を目的とした儀式に近い施術だということ。芯から温めてからスクラブやマスクで老廃物を整え、最後まで丁寧に扱うことで、旅の疲れがリセットされるのを体感しました。</p>
                            <p>泡マッサージの際の力強いロングストロークがバリニーズマッサージのようで心地よく、セラピストに尋ねたら「わたし、バリ島出身よ！」と。一つの場所で、トルコのハマムとバリ島仕込みの手技が融合していることに気づかされ、<strong>癒しの文化は国境を越えて伝わり、組み合わさる</strong>という学びも得ました。サロンで触れてきた足つぼ・ジャムウ・タイハーバル・バリニーズなど、世界の手当ての知恵を自分自身で体験し続けることが、お客様への提供にもつながっていると実感した時間です。</p>
                        </div>
                    </div>
                </div>

                <div class="year-timeline-row" data-has-globe="true">
                    <div class="year-axis"><span class="year-month">2025年10月</span></div>
                    <div class="year-content">
                        <div class="year-accordion-head" aria-expanded="false" aria-controls="body-2025">
                            <span class="year-accordion-icon">＋</span>
                            <span class="year-accordion-title">スリランカ🇱🇰 — アーユルヴェーダ・パンチャカルマの旅</span>
                        </div>
                        <div class="year-accordion-body" id="body-2025" hidden>
                            <div id="globe-timeline-srilanka" class="globe-container globe-timeline-mini" aria-label="スリランカ（アーユルヴェーダ）"></div>
                            <p>スリランカでアーユルヴェーダ・パンチャカルマの旅を体験しました。心と体のデトックスと、伝統的な養生の知恵に触れ、これからのサロンや講座に活かせる学びを持ち帰っています。足つぼ・分子栄養学に続く、心と体の健康づくりのひとつの軸として、ブログやサロンでお伝えしていきたいと考えています。</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>トータルフットケア サンタイ</h3>
                    <p>足の健康を通じて、皆様の豊かな生活をサポートします。</p>
                </div>
                <div class="footer-section">
                    <h3>お問い合わせ</h3>
                    <p>📞 090-5710-3592</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 トータルフットケア サンタイ. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/globe.gl@2/dist/globe.gl.min.js"></script>
    <script>
    (function(){
        var btn = document.querySelector('.nav-toggle');
        var menu = document.querySelector('.nav-menu');
        var closeBtn = document.querySelector('.nav-close');
        if(btn && menu){
            btn.addEventListener('click', function(){ menu.classList.toggle('show'); });
            if(closeBtn) closeBtn.addEventListener('click', function(){ menu.classList.remove('show'); });
            menu.addEventListener('click', function(e){ if(e.target.tagName === 'A') menu.classList.remove('show'); });
        }
    })();

    (function yearAccordion(){
        var rows = document.querySelectorAll('.year-timeline-row');
        var globeInited = {};
        var globeConfig = {
            'body-2014': { id: 'globe-timeline-2014', lat: -8.4, lng: 115.2, label: 'Bali / Perth / Bangkok' },
            'body-2017': { id: 'globe-timeline-taiwan', lat: 25.033, lng: 121.565, label: 'Taiwan — Wo Shi' },
            'body-2018': { id: 'globe-timeline-bangkok', lat: 13.7563, lng: 100.5018, label: 'Bangkok — Chinezarn' },
            'body-2023': { id: 'globe-timeline-2023', lat: 34.34, lng: 134.04, label: 'Takamatsu — 認定講師' },
            'body-2025-05': { id: 'globe-timeline-cappadocia', lat: 38.63, lng: 34.91, label: 'Cappadocia — Hamam' },
            'body-2025': { id: 'globe-timeline-srilanka', lat: 6.0, lng: 80.2, label: 'Sri Lanka — Ayurveda' }
        };
        function initMiniGlobe(bodyId){
            var cfg = globeConfig[bodyId];
            if(!cfg || globeInited[cfg.id] || typeof Globe === 'undefined') return;
            var container = document.getElementById(cfg.id);
            if(!container || !container.offsetParent) return;
            var point = [{ lat: cfg.lat, lng: cfg.lng }];
            var ringData = [{ lat: cfg.lat, lng: cfg.lng, maxR: 15, propagationSpeed: 0.8, repeatPeriod: 3500 }];
            var g = new Globe(container)
                .globeImageUrl('//cdn.jsdelivr.net/npm/three-globe/example/img/earth-day.jpg')
                .backgroundColor('rgba(200,220,240,0.4)')
                .showAtmosphere(true)
                .atmosphereColor('#943232')
                .atmosphereAltitude(0.15)
                .ringsData(ringData)
                .ringColor(function(){ return function(t){ return 'rgba(198,40,40,' + (0.6*(1-t)) + ')'; }; })
                .ringMaxRadius('maxR')
                .ringPropagationSpeed('propagationSpeed')
                .ringRepeatPeriod('repeatPeriod')
                .pointsData(point)
                .pointLabel(function(){ return cfg.label; })
                .pointColor(function(){ return '#c62828'; })
                .pointAltitude(0.22)
                .pointRadius(0.7)
                .pointResolution(16);
            function sz(){ g.width(container.clientWidth); g.height(container.clientHeight); }
            sz();
            window.addEventListener('resize', sz);
            g.pointOfView({ lat: cfg.lat, lng: cfg.lng, altitude: 2.5 }, 0);
            globeInited[cfg.id] = true;
        }
        rows.forEach(function(row){
            var head = row.querySelector('.year-accordion-head');
            var body = row.querySelector('.year-accordion-body');
            if(!head || !body) return;
            head.addEventListener('click', function(){
                var open = head.getAttribute('aria-expanded') === 'true';
                head.setAttribute('aria-expanded', !open);
                body.hidden = open;
                head.querySelector('.year-accordion-icon').textContent = open ? '＋' : '−';
                row.classList.toggle('is-open', !open);
                if(!open && globeConfig[body.id]) setTimeout(function(){ initMiniGlobe(body.id); }, 80);
            });
        });
    })();

    (function initMainGlobe(){
        var container = document.getElementById('globe-container');
        if(!container || typeof Globe === 'undefined') return;

        var takamatsu = { lat: 34.3428, lng: 134.0436, name: 'Takamatsu', desc: 'Salon', isHome: true };
        var locations = [
            { lat: -31.9505, lng: 115.8605, name: 'Perth', desc: 'Aromatherapy', order: 1 },
            { lat: -8.4095, lng: 115.1889, name: 'Bali', desc: 'JAMU / Vanessa', order: 2 },
            { lat: 13.7563, lng: 100.5018, name: 'Bangkok', desc: 'Thai Herbal / Chinezarn', order: 3 },
            { lat: 25.033, lng: 121.5654, name: 'Taiwan', desc: 'Wo Shi', order: 4 },
            { lat: 38.63, lng: 34.91, name: 'Cappadocia', desc: 'Hamam', order: 5 },
            { lat: 6.0, lng: 80.2, name: 'Sri Lanka', desc: 'Ayurveda', order: 6 }
        ];
        var allPoints = [takamatsu].concat(locations);

        function circlePolygon(lat, lng, radiusDeg){
            var pts = [];
            for(var i = 0; i <= 36; i++){
                var t = (i/36)*2*Math.PI;
                pts.push([lat + radiusDeg*Math.cos(t), lng + radiusDeg*Math.sin(t)/Math.max(0.3, Math.cos(lat*Math.PI/180))]);
            }
            return pts;
        }
        var polygonsData = allPoints.map(function(d){ return circlePolygon(d.lat, d.lng, d.isHome ? 3.5 : 5); });

        var arcSegments = [
            { startLat: 34.3428, startLng: 134.0436, endLat: -31.9505, endLng: 115.8605, year: '〜2014年頃', dest: 'Perth', colorFrom: '#5e35b1', colorTo: '#c62828' },
            { startLat: -31.9505, startLng: 115.8605, endLat: -8.4095, endLng: 115.1889, year: '〜2014年頃', dest: 'Bali', colorFrom: '#c62828', colorTo: '#e65100' },
            { startLat: -8.4095, startLng: 115.1889, endLat: 13.7563, endLng: 100.5018, year: '2014年頃', dest: 'Bangkok', colorFrom: '#e65100', colorTo: '#2e7d32' },
            { startLat: 13.7563, startLng: 100.5018, endLat: 25.033, endLng: 121.5654, year: '2017年', dest: 'Taiwan', colorFrom: '#2e7d32', colorTo: '#1565c0' },
            { startLat: 25.033, startLng: 121.5654, endLat: 38.63, endLng: 34.91, year: '2025年5月', dest: 'Cappadocia', colorFrom: '#1565c0', colorTo: '#00838f' },
            { startLat: 38.63, startLng: 34.91, endLat: 6.0, endLng: 80.2, year: '2025年10月', dest: 'SriLanka', colorFrom: '#00838f', colorTo: '#7b1fa2' }
        ];
        var arcsData = arcSegments.map(function(s){ return { startLat: s.startLat, startLng: s.startLng, endLat: s.endLat, endLng: s.endLng, year: s.year, dest: s.dest, colorFrom: s.colorFrom, colorTo: s.colorTo }; });

        var labelData = [
            { lat: 34.3428, lng: 134.0436, text: 'Takamatsu' },
            { lat: 25.033, lng: 121.5654, text: 'Taiwan' },
            { lat: -31.9505, lng: 115.8605, text: 'Perth' },
            { lat: -8.4095, lng: 115.1889, text: 'Bali' },
            { lat: 13.7563, lng: 100.5018, text: 'Bangkok' },
            { lat: 38.63, lng: 34.91, text: 'Cappadocia' },
            { lat: 6.0, lng: 80.2, text: 'Sri Lanka' }
        ];

        var capColors = [0x5e35b1, 0xc62828, 0xe65100, 0x2e7d32, 0x1565c0, 0x00838f, 0x7b1fa2];
        var THREE = window.THREE;
        function capMaterialFn(d, i){
            if(!THREE) return undefined;
            var hex = capColors[i % 7];
            return new THREE.MeshPhongMaterial({ color: hex, emissive: hex, emissiveIntensity: 0.45, side: THREE.DoubleSide, transparent: true, opacity: 0.92, depthWrite: true });
        }
        function sideMaterialFn(d, i){
            if(!THREE) return undefined;
            var hex = capColors[i % 7];
            return new THREE.MeshPhongMaterial({ color: hex, emissive: hex, emissiveIntensity: 0.25, side: THREE.DoubleSide, transparent: true, opacity: 0.85, depthWrite: true });
        }

        var globe = new Globe(container)
            .globeImageUrl('//cdn.jsdelivr.net/npm/three-globe/example/img/earth-day.jpg')
            .backgroundImageUrl(null)
            .backgroundColor('#030314')
            .showAtmosphere(true)
            .atmosphereColor('rgba(100,150,255,0.15)')
            .atmosphereAltitude(0.25)
            .polygonsData(polygonsData)
            .polygonAltitude(function(d, i){ return i === 0 ? 0.22 : 0.12 + (i-1)*0.018; })
            .polygonCapMaterial(capMaterialFn)
            .polygonSideMaterial(sideMaterialFn)
            .polygonCapColor(function(d, i){ return i === 0 ? '#5e35b1' : ['#c62828','#e65100','#2e7d32','#1565c0','#00838f','#7b1fa2'][i-1]; })
            .polygonSideColor(function(d, i){ return ['rgba(94,53,177,0.75)','rgba(198,40,40,0.7)','rgba(230,81,0,0.7)','rgba(46,125,50,0.7)','rgba(21,101,192,0.7)','rgba(0,131,143,0.75)','rgba(123,31,162,0.75)'][i]; })
            .polygonStrokeColor(function(){ return 'rgba(0,0,0,0.35)'; })
            .arcsData(arcsData)
            .arcLabel(function(d){ return d.year + ' ' + (d.dest === 'Perth' ? 'パース' : d.dest === 'Bali' ? 'バリ' : d.dest === 'Bangkok' ? 'バンコク' : d.dest === 'Taiwan' ? '台湾' : d.dest === 'Cappadocia' ? 'トルコ・カッパドキア' : 'スリランカ'); })
            .arcColor(function(d){ return [d.colorFrom, d.colorTo]; })
            .arcStroke(1.3)
            .arcAltitude(0.25)
            .arcDashLength(0.45)
            .arcDashGap(0.15)
            .arcDashAnimateTime(3000)
            .pointsData(allPoints)
            .pointLabel(function(d){ return d.name + ' — ' + d.desc; })
            .pointColor(function(){ return '#fff'; })
            .pointAltitude(0.18)
            .pointRadius(function(d){ return d.isHome ? 0.45 : 0.35; })
            .pointResolution(12)
            .labelsData(labelData)
            .labelLabel(function(d){ return d.text; })
            .labelAltitude(0.15)
            .labelSize(1.1)
            .labelColor(function(){ return '#1a1a1a'; })
            .labelResolution(2);

        function sizeGlobe(){ globe.width(container.clientWidth); globe.height(container.clientHeight); }
        sizeGlobe();
        window.addEventListener('resize', sizeGlobe);
        globe.pointOfView({ lat: 8, lng: 132, altitude: 1.85 }, 0);

        if(typeof THREE !== 'undefined' && arcSegments.length > 0){
            var R = 0.25;
            function latLngToCart(lat, lng){
                var phi = (90 - lat) * Math.PI / 180, theta = (lng + 180) * Math.PI / 180;
                return { x: R*Math.sin(phi)*Math.cos(theta), y: R*Math.sin(phi)*Math.sin(theta), z: R*Math.cos(phi) };
            }
            function slerpLatLng(lat1, lng1, lat2, lng2, t){
                var v0 = latLngToCart(lat1, lng1), v1 = latLngToCart(lat2, lng2);
                var dot = v0.x*v1.x + v0.y*v1.y + v0.z*v1.z;
                if(dot > 0.9999) return { lat: lat1 + t*(lat2-lat1), lng: lng1 + t*(lng2-lng1) };
                if(dot < -0.9999) dot = -0.9999;
                var omega = Math.acos(dot), sinOmega = Math.sin(omega);
                var a = Math.sin((1-t)*omega)/sinOmega, b = Math.sin(t*omega)/sinOmega;
                var x = a*v0.x + b*v1.x, y = a*v0.y + b*v1.y, z = a*v0.z + b*v1.z;
                var r = Math.sqrt(x*x+y*y+z*z);
                return { lat: 90 - Math.acos(z/r)*180/Math.PI, lng: Math.atan2(y,x)*180/Math.PI - 180 };
            }
            var planeGeo = new THREE.ConeGeometry(0.015, 0.06, 8);
            var planeMat = new THREE.MeshPhongMaterial({ color: 0xffffff, emissive: 0x4444aa });
            var planeMesh = new THREE.Mesh(planeGeo, planeMat);
            planeMesh.rotation.x = Math.PI / 2;
            var planeSegment = 0, planeT = 0, planeSpeed = 0.0012;
            try{ globe.scene().add(planeMesh); }catch(e){}
            function animatePlane(){
                if(!planeMesh.parent) return;
                var seg = arcSegments[planeSegment];
                var pos = slerpLatLng(seg.startLat, seg.startLng, seg.endLat, seg.endLng, planeT);
                var coords = globe.getCoords(pos.lat, pos.lng, 0.26);
                if(coords && coords.x != null) planeMesh.position.copy(coords);
                planeT += planeSpeed;
                if(planeT >= 1){ planeT = 0; planeSegment = (planeSegment + 1) % arcSegments.length; }
            }
            setInterval(animatePlane, 20);
        }
    })();
    </script>
</body>
</html>
